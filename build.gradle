plugins {
  id "java"
  id "com.google.cloud.tools.jib" version "3.3.1"
}

group = "com.hkmc.ccs"
version = "1.0.35.M-1"

repositories {
  mavenLocal()
  maven {
    url "https://package-int.hcloud.hmc.co.kr/repository/maven-public/"
  }
  mavenCentral()
}

dependencies {
  testImplementation group: 'com.h2database', name: 'h2', version: '1.4.200'

  implementation (platform('com.ccs-sre-team:parent:1.0.7')) {
    exclude module: 'commons-mongodb'
    exclude module: 'spring-boot-starter-data-mongodb'
    exclude module: 'spring-boot-starter-data-mongodb-reactive'
    exclude module: 'spring-data-mongodb-encrypt'
    exclude module: 'de.flapdoodle.embed.mongo'
    exclude module: 'commons-r2dbc'
  }



  annotationProcessor 'org.projectlombok:lombok:1.18.26'
  testCompileOnly 'org.projectlombok:lombok:1.18.26'
  testAnnotationProcessor 'org.projectlombok:lombok:1.18.26'

}


jib {
  from {
    image = "registry.hcloud.hmc.co.kr/ccs/graalvm-ce:ol9-java17-22.3.0"
  }
  to {
    allowInsecureRegistries = true
    image = "registry.hcloud.hmc.co.kr/ccs/${project.name}"
    auth {
      username = "e679127"
      password = "3b25ym8plS"
    }
    tags = ["${project.version}"]
  }
  container {
  }
}


test {
  useJUnitPlatform()
}
