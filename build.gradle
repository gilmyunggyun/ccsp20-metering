plugins {
  id "com.hkmc.h2" version "1.0.35"
}

group = "com.hkmc.ccs"
version = "1.0.27"

cloudnative {
  microservice {
    openfeign = true
  }

  persistent {
    jpa = true
    postgresql = true
  }

  quality {
    skipAll = true
  }

  thirdparty {
    commonsLang = true
    commonsCollections = true
    prometheusRSocket = true
    jasypt = true
  }

  cicd {
    container {
      enabled = true
      to = "registry.hcloud.hmc.co.kr/ccs/${project.name}"
      jvmOption = "-XX:+UnlockExperimentalVMOptions -XX:+UseZGC -XX:InitialRAMPercentage=50 -XX:MinRAMPercentage=50 -XX:MaxRAMPercentage=75"
    }

    helm {
      name = "metering"
      namespace = "metering"
      serviceType = "NodePort"
      servicePort = 8080
      nodePort = 30017
      cpu = "500m"
      memory = "1.5G"
      minReplicas = 12
      maxReplicas = 16
    }

    deploy {
      target = ["rc:ap-northeast-2:stg", "release:ap-northeast-2:prd"]
    }
  }
}

dependencies {
  testImplementation group: 'com.h2database', name: 'h2', version: '1.4.200'
  implementation 'org.springframework.boot:spring-boot-starter-validation'
}

