plugins {
  id "com.hkmc.cloudnative" version "1.0.8"
}

group = "com.hkmc.ccs"
version = "1.0.2"

cloudnative {
  printConfig = false

  core {
    dbcore = true
    processcore = true
  }

  container {
    enabled = true
    from = "registry.hcloud.hmc.co.kr/ccs/java:17"
    to = "registry.hcloud.hmc.co.kr/ccs/${project.name}"
    tag = ["${project.version}", 'latest']
  }

  microservice {
//    reactive = true
    swagger = true
    undertow = true
    security = true
    metric = true
    trace = true
    config = true
    circuitbreaker = true
    validate = true
  }

  springcloud {
    kubernetes = false
    openfeign = true
    kafka = true
    cloudbus = true
  }

  persistent {
    jpa = true
    postgresql = true
  }

  quality {
    checkerframework = true
    checkstyleIgnoreFailure = true
    pmdIgnoreFailures = true
    sonarqubeIgnoreFailure = true
    skipCheckerFramework = true
  }

  thirdparty {
    commonsLang = true
    commonsCollections = true
    jasypt = true
  }

  cicd {
    gitlabPath = "ccs/domain/ccsp20-metering"
    chartName = "metering"
  }
}

dependencies {
  implementation 'io.micrometer.prometheus:prometheus-rsocket-spring:1.2.1'
  implementation 'com.zaxxer:HikariCP:5.0.0'
}

