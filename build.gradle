plugins {
  id "com.hkmc.cloudnative" version "1.6.6"
}

group = "com.hkmc.ccs"
version = "1.0.9"

cloudnative {

  microservice {
    core = true
    swagger = true
    undertow = false
    security = true
    metric = true
    trace = true
    config = true
    openfeign = true
    kafka = true
    cloudbus = true
  }

  persistent {
    jpa = true
    postgresql = true
  }

  quality {
    checkerframework = true
    checkstyleIgnoreFailure = true
    pmdIgnoreFailures = true
    sonarqubeIgnoreFailure = true
    skipCheckerFramework = true
  }

  thirdparty {
    commonsLang = true
    commonsCollections = true
    prometheusRSocket = true
    jasypt = true
  }

  cicd {
    helm = true
    gitlabPath = "ccs/domain/metering/ccsp20-metering"
    chartName = "metering"

    jib = true
    to = "registry.hcloud.hmc.co.kr/ccs/${project.name}"
    tag = ["${project.version}", 'latest']

    cluster = "ccs-stg"
    branch = "hcloud"
    namespace = "metering"

    serviceType= "NodePort"
    servicePort= 8080
    nodePort= 30017

    readinessInitialDelaySeconds=60
    readinessPeriodSeconds=60
    livenessInitialDelaySeconds=60
    livenessPeriodSeconds=60

  }
}

dependencies {
  testImplementation group: 'com.h2database', name: 'h2', version: '2.0.202'
}

